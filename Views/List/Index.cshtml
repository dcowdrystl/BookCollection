@using BookCollection.Models

@model List<Book>

<h1>List Books</h1>
<div class="container body-content">

  

    <form action="/list/index" method="post">
    

        <p>
            <label for="searchTerm"></label>
            <input type="text" name="searchTerm" id="searchTerm" />
             <input type="submit" value="Search" />
        </p>

       
    </form>

    <hr />

</div>

@if (Model.Count == 0)
{
    <p>No Books in the Online Collection yet!</p>
}

else
{
<table class="table">
    <tr>
        @*<th>
                Id
            </th>*@
        <th>
            Book Title
        </th>
        <th>
            Author's First Name
        </th>
        <th>
            Author's Last Name
        </th>
        <th>
            Genre
        </th>
        <th>
            Number of Pages
        </th>

    </tr>

    @foreach (var book in Model)
    {
<tr>
    @*<td>@book.Id</td>*@
    @*<td>@book.BookTitle</td>*@
    <td><b><a asp-controller="Books" asp-action="Detail" asp-route-id="@book.Id" style="color:black" >@book.BookTitle</a></b></td>
    <td>@book.AuthorFirstName</td>
    <td>@book.AuthorLastName</td>
    <td>@book.Genre</td>
    <td>@book.NumberOfPages</td>
    @if (ViewBag.bookTitles.Contains(book.BookTitle))
    {
        <td><button type="button" class="btn btn-secondary" disabled>Already Added</button></td>
    }
    else
    {
        @if (User.Identity.IsAuthenticated)
        {
            <td>
                @Html.ActionLink(
                        "Add Book",
                        "AddOtherBooks",
                        "Books",
                        new { bookId = @book.Id },
                        htmlAttributes: new { @class = "btn btn-outline-secondary", @role = "button" })
            </td>
        }
    }
</tr>
            

        }
        </table>
}
